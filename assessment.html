<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu Profit Score Assessment | The Grumpy Chef</title>
    <meta name="description" content="Is your menu leaving $50K+ on the table? Take the 3-minute Menu Profit Score assessment. Research-backed menu engineering principles from a German Master Chef.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Oswald:wght@500;600;700&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* ============================================
           RESET & VARIABLES
           ============================================ */
        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

        :root {
            --navy: #0A1628;
            --navy-light: #0E1B30;
            --navy-card: #111E35;
            --navy-border: #1A2D4D;
            --navy-hover: #162642;
            --white: #F8F9FA;
            --white-dim: #B8BEC8;
            --gray: #4A5568;
            --gray-dark: #2D3748;
            --gold: #D4AF37;
            --gold-dim: #B89630;
            --gold-glow: rgba(212, 175, 55, 0.10);
            --gold-border: rgba(212, 175, 55, 0.25);
            --blue: #00A6D6;
            --blue-dim: #008AB3;
            --blue-glow: rgba(0, 166, 214, 0.10);
            --red: #C53030;
            --red-glow: rgba(197, 48, 48, 0.10);
            --green: #2F855A;
            --green-glow: rgba(47, 133, 90, 0.10);
            --font-display: 'Oswald', 'Arial Narrow', sans-serif;
            --font-body: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            --font-mono: 'JetBrains Mono', 'Cascadia Code', 'Consolas', monospace;
        }

        html { scroll-behavior: smooth; }
        body {
            font-family: var(--font-body);
            background: var(--navy);
            color: var(--white);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
        }

        /* ============================================
           LAYOUT
           ============================================ */
        .container { max-width: 780px; margin: 0 auto; padding: 0 24px; }
        .gold-top { height: 3px; background: linear-gradient(90deg, var(--gold), var(--blue), var(--gold)); }

        /* ============================================
           HERO
           ============================================ */
        .hero {
            padding: 56px 0 40px;
            background: linear-gradient(180deg, #0C1A2E 0%, var(--navy) 100%);
            border-bottom: 1px solid var(--navy-border);
        }
        .hero__brand {
            font-family: var(--font-display);
            font-weight: 700;
            font-size: 13px;
            letter-spacing: 4px;
            text-transform: uppercase;
            color: var(--gold);
            margin-bottom: 20px;
        }
        .hero__title {
            font-family: var(--font-display);
            font-weight: 700;
            font-size: clamp(28px, 5.5vw, 46px);
            line-height: 1.08;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 16px;
        }
        .hero__sub {
            font-size: 17px;
            color: var(--white-dim);
            max-width: 560px;
            line-height: 1.55;
            margin-bottom: 28px;
        }
        .hero__sub strong { color: var(--gold); font-weight: 600; }

        /* Stats Bar */
        .stats {
            display: flex;
            gap: 0;
            border: 1px solid var(--navy-border);
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 28px;
        }
        .stat {
            flex: 1;
            padding: 16px 12px;
            text-align: center;
            border-right: 1px solid var(--navy-border);
        }
        .stat:last-child { border-right: none; }
        .stat__num {
            font-family: var(--font-display);
            font-weight: 700;
            font-size: 20px;
            color: var(--gold);
            line-height: 1.1;
        }
        .stat__label {
            font-size: 11px;
            color: var(--gray);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-top: 4px;
            line-height: 1.3;
        }

        /* Brand Photo */
        .hero__layout {
            display: flex;
            align-items: flex-start;
            gap: 32px;
        }
        .hero__content { flex: 1; }
        .hero__photo {
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            padding-top: 8px;
        }
        .brand-photo {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            border: 3px solid var(--gold);
            object-fit: cover;
            display: block;
        }
        .brand-photo-caption {
            font-size: 11px;
            color: var(--gray);
            text-align: center;
            line-height: 1.4;
            max-width: 160px;
        }
        .results-attribution {
            display: flex;
            align-items: center;
            gap: 14px;
            padding: 16px 20px;
            background: var(--navy-card);
            border: 1px solid var(--navy-border);
            border-radius: 8px;
            margin: 24px 0;
        }
        .results-attribution__photo {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            border: 2px solid var(--gold);
            object-fit: cover;
            flex-shrink: 0;
        }
        .results-attribution__text {
            font-size: 13px;
            color: var(--white-dim);
            line-height: 1.5;
        }
        .results-attribution__text strong { color: var(--white); }

        /* Credentials */
        .creds {
            font-size: 12px;
            color: var(--gray);
            letter-spacing: 0.3px;
        }
        .creds span { color: var(--navy-border); margin: 0 8px; }

        /* Start CTA */
        .hero__cta {
            display: inline-block;
            font-family: var(--font-display);
            font-weight: 600;
            font-size: 14px;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            color: var(--navy);
            background: var(--gold);
            text-decoration: none;
            padding: 14px 36px;
            margin-top: 24px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            transition: all 0.15s ease;
        }
        .hero__cta:hover { background: var(--gold-dim); }

        /* ============================================
           INTRO
           ============================================ */
        .intro {
            padding: 36px 0;
            border-bottom: 1px solid var(--navy-border);
        }
        .intro__text {
            font-size: 15px;
            color: var(--white-dim);
            line-height: 1.75;
            margin-bottom: 10px;
        }
        .intro__text strong { color: var(--white); }
        .intro__quote {
            font-family: var(--font-mono);
            font-size: 13px;
            color: var(--gold);
            padding: 18px 20px;
            background: var(--gold-glow);
            border-left: 3px solid var(--gold);
            margin-top: 20px;
            line-height: 1.65;
        }

        /* ============================================
           PROGRESS BAR
           ============================================ */
        .progress-section {
            padding: 24px 0 0;
            display: none;
        }
        .progress-section.active { display: block; }
        .progress__header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        .progress__label {
            font-family: var(--font-display);
            font-weight: 600;
            font-size: 12px;
            letter-spacing: 3px;
            text-transform: uppercase;
            color: var(--gray);
        }
        .progress__count {
            font-family: var(--font-mono);
            font-size: 13px;
            color: var(--gold);
        }
        .progress__bar {
            width: 100%;
            height: 4px;
            background: var(--navy-border);
            border-radius: 2px;
            overflow: hidden;
        }
        .progress__fill {
            height: 100%;
            background: linear-gradient(90deg, var(--gold), var(--blue));
            border-radius: 2px;
            transition: width 0.4s ease;
            width: 0%;
        }

        /* ============================================
           QUIZ
           ============================================ */
        .quiz-section {
            padding: 0 0 80px;
            display: none;
        }
        .quiz-section.active { display: block; }

        .question-card {
            display: none;
            padding: 32px 0;
            animation: fadeSlideIn 0.35s ease;
        }
        .question-card.active { display: block; }

        @keyframes fadeSlideIn {
            from { opacity: 0; transform: translateY(12px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .question-card__num {
            font-family: var(--font-mono);
            font-size: 11px;
            color: var(--gray-dark);
            margin-bottom: 8px;
        }
        .question-card__text {
            font-family: var(--font-display);
            font-weight: 600;
            font-size: clamp(22px, 4vw, 30px);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            line-height: 1.15;
            margin-bottom: 24px;
        }

        .answer-option {
            display: flex;
            align-items: flex-start;
            gap: 16px;
            padding: 16px 20px;
            background: var(--navy-card);
            border: 1px solid var(--navy-border);
            border-radius: 8px;
            cursor: pointer;
            margin-bottom: 10px;
            transition: all 0.15s ease;
        }
        .answer-option:hover {
            background: var(--navy-hover);
            border-color: var(--gold-border);
        }
        .answer-option.selected {
            background: var(--gold-glow);
            border-color: var(--gold);
        }

        .answer-option__radio {
            flex-shrink: 0;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            border: 2px solid var(--gray-dark);
            margin-top: 2px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.15s;
        }
        .answer-option.selected .answer-option__radio {
            border-color: var(--gold);
        }
        .answer-option__radio__dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--gold);
            transform: scale(0);
            transition: transform 0.15s;
        }
        .answer-option.selected .answer-option__radio__dot {
            transform: scale(1);
        }

        .answer-option__content { flex: 1; }
        .answer-option__label {
            font-weight: 600;
            font-size: 15px;
            color: var(--white);
            margin-bottom: 4px;
        }
        .answer-option__insight {
            font-size: 13px;
            color: var(--gray);
            line-height: 1.5;
        }
        .answer-option.selected .answer-option__insight {
            color: var(--white-dim);
        }

        .answer-option__points {
            flex-shrink: 0;
            font-family: var(--font-mono);
            font-size: 13px;
            color: var(--gray-dark);
            margin-top: 3px;
        }
        .answer-option.selected .answer-option__points {
            color: var(--gold);
        }

        /* Navigation buttons */
        .quiz-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 24px;
            margin-top: 8px;
            border-top: 1px solid var(--navy-border);
        }
        .btn-back {
            font-family: var(--font-body);
            font-weight: 600;
            font-size: 14px;
            color: var(--gray);
            background: none;
            border: 1px solid var(--navy-border);
            padding: 10px 24px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.15s;
        }
        .btn-back:hover { color: var(--white); border-color: var(--gray); }
        .btn-back:disabled { opacity: 0.3; cursor: not-allowed; }

        .btn-next {
            font-family: var(--font-display);
            font-weight: 600;
            font-size: 14px;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            color: var(--navy);
            background: var(--gold);
            border: none;
            padding: 12px 32px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.15s;
        }
        .btn-next:hover { background: var(--gold-dim); }
        .btn-next:disabled { opacity: 0.3; cursor: not-allowed; }

        /* ============================================
           RESULTS
           ============================================ */
        .results-section {
            padding: 48px 0 40px;
            display: none;
        }
        .results-section.active { display: block; }

        .results__header {
            text-align: center;
            margin-bottom: 40px;
        }
        .results__label {
            font-family: var(--font-display);
            font-weight: 600;
            font-size: 12px;
            letter-spacing: 3px;
            text-transform: uppercase;
            color: var(--gray);
            margin-bottom: 20px;
        }

        /* Score Gauge */
        .gauge {
            position: relative;
            width: 220px;
            height: 120px;
            margin: 0 auto 24px;
        }
        .gauge__svg {
            width: 220px;
            height: 120px;
        }
        .gauge__bg {
            fill: none;
            stroke: var(--navy-border);
            stroke-width: 12;
        }
        .gauge__fill {
            fill: none;
            stroke: var(--gold);
            stroke-width: 12;
            stroke-linecap: round;
            transition: stroke-dashoffset 1.5s ease, stroke 0.5s ease;
        }
        .gauge__score {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
        }
        .gauge__number {
            font-family: var(--font-mono);
            font-weight: 700;
            font-size: 48px;
            color: var(--gold);
            line-height: 1;
        }
        .gauge__max {
            font-family: var(--font-mono);
            font-size: 14px;
            color: var(--gray);
        }

        .results__tier {
            font-family: var(--font-display);
            font-weight: 700;
            font-size: clamp(24px, 5vw, 36px);
            text-transform: uppercase;
            text-align: center;
            margin-bottom: 8px;
        }
        .results__desc {
            font-size: 16px;
            color: var(--white-dim);
            text-align: center;
            max-width: 560px;
            margin: 0 auto 16px;
            line-height: 1.6;
        }

        .results__opportunity {
            text-align: center;
            padding: 20px;
            background: var(--gold-glow);
            border: 1px solid var(--gold-border);
            border-radius: 8px;
            margin-bottom: 12px;
        }
        .results__opportunity-label {
            font-size: 12px;
            color: var(--gray);
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 6px;
        }
        .results__opportunity-amount {
            font-family: var(--font-mono);
            font-weight: 700;
            font-size: 32px;
            color: var(--gold);
        }
        .results__opportunity-note {
            font-size: 13px;
            color: var(--white-dim);
            margin-top: 4px;
        }

        .results__next-step {
            font-family: var(--font-mono);
            font-size: 13px;
            color: var(--blue);
            padding: 16px 20px;
            background: var(--blue-glow);
            border-left: 3px solid var(--blue);
            line-height: 1.65;
            margin-bottom: 40px;
        }

        /* Missed Opportunities */
        .missed {
            margin-bottom: 40px;
        }
        .missed__title {
            font-family: var(--font-display);
            font-weight: 600;
            font-size: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 20px;
            color: var(--white);
        }
        .missed-item {
            padding: 20px;
            background: var(--navy-card);
            border: 1px solid var(--navy-border);
            border-radius: 8px;
            margin-bottom: 10px;
        }
        .missed-item__q {
            font-weight: 600;
            font-size: 14px;
            color: var(--white);
            margin-bottom: 6px;
        }
        .missed-item__insight {
            font-size: 13px;
            color: var(--white-dim);
            line-height: 1.6;
            margin-bottom: 8px;
        }
        .missed-item__impact {
            font-family: var(--font-mono);
            font-size: 12px;
            color: var(--gold);
        }

        /* Quick Wins */
        .quick-wins {
            margin-bottom: 40px;
        }
        .quick-wins__title {
            font-family: var(--font-display);
            font-weight: 600;
            font-size: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 20px;
            color: var(--white);
        }
        .win-item {
            display: flex;
            align-items: flex-start;
            gap: 14px;
            padding: 16px 20px;
            background: var(--green-glow);
            border: 1px solid rgba(47, 133, 90, 0.25);
            border-radius: 8px;
            margin-bottom: 10px;
        }
        .win-item__icon {
            flex-shrink: 0;
            width: 24px;
            height: 24px;
            background: var(--green);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: var(--white);
            font-weight: 700;
            margin-top: 1px;
        }
        .win-item__text {
            font-size: 14px;
            color: var(--white-dim);
            line-height: 1.55;
        }
        .win-item__text strong { color: var(--white); }

        /* Research */
        .research {
            padding: 24px;
            background: var(--navy-card);
            border: 1px solid var(--navy-border);
            border-radius: 8px;
            margin-bottom: 40px;
        }
        .research__title {
            font-family: var(--font-display);
            font-weight: 600;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--gray);
            margin-bottom: 14px;
        }
        .research__item {
            font-size: 13px;
            color: var(--white-dim);
            line-height: 1.6;
            padding: 6px 0;
            border-bottom: 1px solid var(--navy-border);
        }
        .research__item:last-child { border-bottom: none; }
        .research__item strong { color: var(--blue); }

        /* Post-Results Quote */
        .post-results-quote {
            font-family: var(--font-mono);
            font-size: 13px;
            color: var(--gold);
            padding: 18px 20px;
            background: var(--gold-glow);
            border-left: 3px solid var(--gold);
            line-height: 1.65;
            margin-bottom: 40px;
        }

        /* ============================================
           EMAIL CAPTURE
           ============================================ */
        .capture {
            padding: 40px 0;
            border-top: 1px solid var(--navy-border);
            display: none;
        }
        .capture.active { display: block; }

        .capture__box {
            padding: 32px;
            background: var(--navy-card);
            border: 1px solid var(--gold-border);
            border-radius: 8px;
        }
        .capture__title {
            font-family: var(--font-display);
            font-weight: 700;
            font-size: 24px;
            text-transform: uppercase;
            margin-bottom: 8px;
        }
        .capture__sub {
            font-size: 14px;
            color: var(--white-dim);
            margin-bottom: 24px;
            line-height: 1.55;
        }
        .capture__form { display: flex; flex-direction: column; gap: 12px; }
        .capture__row { display: flex; gap: 12px; }
        .capture__field {
            flex: 1;
            font-family: var(--font-body);
            font-size: 14px;
            padding: 12px 16px;
            background: var(--navy);
            border: 1px solid var(--navy-border);
            border-radius: 6px;
            color: var(--white);
            outline: none;
            transition: border-color 0.15s;
        }
        .capture__field:focus { border-color: var(--gold-dim); }
        .capture__field::placeholder { color: var(--gray-dark); }
        .capture__select {
            flex: 1;
            font-family: var(--font-body);
            font-size: 14px;
            padding: 12px 16px;
            background: var(--navy);
            border: 1px solid var(--navy-border);
            border-radius: 6px;
            color: var(--white);
            outline: none;
            appearance: none;
            cursor: pointer;
            transition: border-color 0.15s;
        }
        .capture__select:focus { border-color: var(--gold-dim); }
        .capture__select option { background: var(--navy); color: var(--white); }
        .capture__btn {
            font-family: var(--font-display);
            font-weight: 600;
            font-size: 14px;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            color: var(--navy);
            background: var(--gold);
            border: none;
            padding: 14px 32px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.15s;
            margin-top: 4px;
        }
        .capture__btn:hover { background: var(--gold-dim); }
        .capture__btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .capture__privacy {
            font-size: 12px;
            color: var(--gray);
            margin-top: 8px;
        }
        .capture__error {
            font-size: 13px;
            color: var(--red);
            display: none;
        }

        /* Success State */
        .capture__success {
            display: none;
            text-align: center;
            padding: 32px;
        }
        .capture__success.active { display: block; }
        .capture__success-icon {
            width: 56px;
            height: 56px;
            background: var(--green);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 16px;
            font-size: 24px;
            color: var(--white);
        }
        .capture__success-title {
            font-family: var(--font-display);
            font-weight: 700;
            font-size: 22px;
            text-transform: uppercase;
            margin-bottom: 8px;
        }
        .capture__success-text {
            font-size: 14px;
            color: var(--white-dim);
            line-height: 1.6;
            margin-bottom: 24px;
        }

        /* ============================================
           CTAs
           ============================================ */
        .cta-section {
            padding: 40px 0;
            border-top: 1px solid var(--navy-border);
            display: none;
        }
        .cta-section.active { display: block; }

        .cta-primary {
            display: block;
            text-align: center;
            padding: 24px;
            background: linear-gradient(135deg, var(--gold-glow), var(--blue-glow));
            border: 1px solid var(--gold-border);
            border-radius: 8px;
            text-decoration: none;
            margin-bottom: 12px;
            transition: all 0.15s;
        }
        .cta-primary:hover { border-color: var(--gold); }
        .cta-primary__title {
            font-family: var(--font-display);
            font-weight: 700;
            font-size: 18px;
            text-transform: uppercase;
            color: var(--gold);
            margin-bottom: 4px;
        }
        .cta-primary__sub {
            font-size: 13px;
            color: var(--white-dim);
        }

        .cta-row {
            display: flex;
            gap: 12px;
        }
        .cta-secondary {
            flex: 1;
            display: block;
            text-align: center;
            padding: 20px 16px;
            background: var(--navy-card);
            border: 1px solid var(--navy-border);
            border-radius: 8px;
            text-decoration: none;
            transition: all 0.15s;
        }
        .cta-secondary:hover { border-color: var(--gold-border); }
        .cta-secondary__title {
            font-family: var(--font-display);
            font-weight: 600;
            font-size: 14px;
            text-transform: uppercase;
            color: var(--white);
            margin-bottom: 4px;
        }
        .cta-secondary__sub {
            font-size: 12px;
            color: var(--gray);
        }

        .cta-funnel {
            font-family: var(--font-mono);
            font-size: 13px;
            color: var(--white-dim);
            text-align: center;
            padding: 20px;
            margin-top: 20px;
            line-height: 1.65;
        }

        /* ============================================
           FOOTER
           ============================================ */
        .footer {
            padding: 32px 0;
            border-top: 1px solid var(--navy-border);
            text-align: center;
        }
        .footer__text {
            font-family: var(--font-mono);
            font-size: 12px;
            color: var(--gray-dark);
            letter-spacing: 0.5px;
        }
        .footer__text a {
            color: var(--gray);
            text-decoration: none;
        }
        .footer__text a:hover { color: var(--gold); }

        /* ============================================
           RESPONSIVE
           ============================================ */
        @media (max-width: 600px) {
            .hero__layout { flex-direction: column; align-items: center; text-align: center; }
            .hero__photo { padding-top: 0; margin-bottom: 8px; }
            .brand-photo { width: 100px; height: 100px; }
            .hero__title, .hero__sub { text-align: center; }
            .stats { flex-wrap: wrap; }
            .stat { flex: 1 1 33%; min-width: 0; }
            .stat:nth-child(3) { border-right: none; }
            .stat:nth-child(n+4) { border-top: 1px solid var(--navy-border); }
            .capture__row { flex-direction: column; }
            .cta-row { flex-direction: column; }
            .capture__box { padding: 24px 20px; }
            .gauge { width: 180px; height: 100px; }
            .gauge__svg { width: 180px; height: 100px; }
            .gauge__number { font-size: 38px; }
        }

        /* ============================================
           PRINT
           ============================================ */
        @media print {
            body { background: #fff; color: #111; }
            .gold-top, .hero__cta, .progress-section, .quiz-section,
            .capture, .cta-section, .btn-back, .btn-next { display: none !important; }
            .hero { background: none; border: none; padding: 24px 0; }
            .hero__brand { color: #B89630; }
            .hero__title { color: #111; font-size: 28px; }
            .hero__sub { color: #444; }
            .stats { border-color: #ddd; }
            .stat { border-color: #ddd; }
            .stat__num { color: #B89630; }
            .stat__label { color: #666; }
            .results-section { display: block !important; padding: 16px 0; }
            .results__opportunity { border-color: #ddd; background: #f9f7f0; }
            .results__opportunity-amount { color: #B89630; }
            .results__next-step { border-color: #008AB3; background: #f0f8fc; color: #008AB3; }
            .missed-item { border-color: #ddd; background: #fafafa; }
            .win-item { border-color: #ccc; background: #f0f7f3; }
            .research { border-color: #ddd; background: #fafafa; }
            .post-results-quote { border-color: #B89630; background: #f9f7f0; color: #B89630; }
            .gauge__fill { stroke: #B89630; }
            .gauge__bg { stroke: #ddd; }
            .gauge__number { color: #B89630; }
            .footer { border-color: #ddd; }
            .footer__text { color: #999; }
            .container { max-width: 100%; }
        }
    </style>
</head>
<body>

<div class="gold-top"></div>

<!-- ============================================
     HERO
     ============================================ -->
<section class="hero">
    <div class="container">
        <div class="hero__layout">
            <div class="hero__content">
                <div class="hero__brand">The Grumpy Chef</div>
                <h1 class="hero__title">Is Your Menu Leaving<br>$50K+ on the Table?</h1>
                <p class="hero__sub">
                    Take the <strong>3-minute Menu Profit Score</strong> assessment and find out exactly what you're missing. No guesswork. Research-backed menu engineering principles.
                </p>
            </div>
            <div class="hero__photo">
                <img class="brand-photo" src="/images/Kitchen1.jpg" alt="Christian Schiffner — German Master Chef">
                <div class="brand-photo-caption">Christian Schiffner<br>German Master Chef (Kuechenmeister)<br>20+ Years Operations</div>
            </div>
        </div>

        <div class="stats">
            <div class="stat">
                <div class="stat__num">15-30%</div>
                <div class="stat__label">Profit Increase<br>Possible</div>
            </div>
            <div class="stat">
                <div class="stat__num">$0</div>
                <div class="stat__label">Price Increases<br>Needed</div>
            </div>
            <div class="stat">
                <div class="stat__num">10</div>
                <div class="stat__label">Research-Backed<br>Questions</div>
            </div>
            <div class="stat">
                <div class="stat__num">3 min</div>
                <div class="stat__label">To Complete</div>
            </div>
        </div>

        <div class="creds">
            By Christian Schiffner, German Master Chef (Kuechenmeister)
            <span>|</span> 20+ years operations <span>|</span> 5 countries
        </div>

        <button class="hero__cta" onclick="startAssessment()">Start the Assessment</button>
    </div>
</section>

<!-- ============================================
     INTRO
     ============================================ -->
<section class="intro">
    <div class="container">
        <p class="intro__text">
            Most restaurant menus are designed by accident. Yours can be <strong>designed for profit</strong>.
        </p>
        <p class="intro__text">
            I'm Christian Schiffner — German Master Chef who's engineered menus for operations from Zurich to the Yukon. This assessment uses research from <strong>Cornell University</strong>, menu psychology studies, and <strong>20+ years of what actually works</strong> in real kitchens under real pressure.
        </p>
        <div class="intro__quote">
            "Menu engineering isn't about manipulation — it's about guiding customers to dishes they'll love while you make more money. Everybody wins. That's how systems should work."
        </div>
    </div>
</section>

<!-- ============================================
     PROGRESS BAR
     ============================================ -->
<section class="progress-section" id="progressSection">
    <div class="container">
        <div class="progress__header">
            <div class="progress__label">Assessment</div>
            <div class="progress__count" id="progressCount">Question 1 of 10</div>
        </div>
        <div class="progress__bar">
            <div class="progress__fill" id="progressFill"></div>
        </div>
    </div>
</section>

<!-- ============================================
     QUIZ
     ============================================ -->
<section class="quiz-section" id="quizSection">
    <div class="container" id="quizContainer">
        <!-- Questions rendered by JS -->
    </div>
</section>

<!-- ============================================
     RESULTS
     ============================================ -->
<section class="results-section" id="resultsSection">
    <div class="container">

        <div class="results__header">
            <div class="results__label">Your Menu Profit Score</div>

            <div class="gauge">
                <svg class="gauge__svg" viewBox="0 0 220 120">
                    <path class="gauge__bg" d="M 20 110 A 90 90 0 0 1 200 110" />
                    <path class="gauge__fill" id="gaugeFill" d="M 20 110 A 90 90 0 0 1 200 110" />
                </svg>
                <div class="gauge__score">
                    <div class="gauge__number" id="gaugeNumber">0</div>
                    <div class="gauge__max">/ 100</div>
                </div>
            </div>

            <div class="results__tier" id="resultsTier"></div>
            <p class="results__desc" id="resultsDesc"></p>
        </div>

        <div class="results__opportunity">
            <div class="results__opportunity-label">Annual Profit Opportunity</div>
            <div class="results__opportunity-amount" id="resultsAmount"></div>
            <div class="results__opportunity-note" id="resultsNote">additional annual profit with systematic menu engineering</div>
        </div>

        <div class="results__next-step" id="resultsNextStep"></div>

        <!-- Missed Opportunities -->
        <div class="missed" id="missedSection">
            <div class="missed__title">Your Top Missed Opportunities</div>
            <div id="missedList"></div>
        </div>

        <!-- Quick Wins -->
        <div class="quick-wins" id="quickWinsSection">
            <div class="quick-wins__title">Quick Wins You Can Implement This Week</div>
            <div id="quickWinsList"></div>
        </div>

        <!-- Research -->
        <div class="research">
            <div class="research__title">Research Behind This Assessment</div>
            <div class="research__item"><strong>Cornell University:</strong> Removing dollar signs from menus increases average spend by 8%</div>
            <div class="research__item"><strong>Descriptive Label Study:</strong> Vivid, sensory menu descriptions increase sales by up to 27%</div>
            <div class="research__item"><strong>Menu Engineering Matrix:</strong> Categorizing items as Stars, Plowhorses, Puzzles, and Dogs has been the gold standard since Kasavana & Smith (1982)</div>
            <div class="research__item"><strong>Choice Overload Research:</strong> Menus with fewer, curated options increase customer satisfaction and reduce decision fatigue</div>
            <div class="research__item"><strong>Price Anchoring:</strong> Strategic placement of high-priced items increases average check by 6-8% (Journal of Consumer Research)</div>
        </div>

        <div class="post-results-quote">
            "This assessment shows you WHAT you're missing. The discovery call shows you HOW to fix it. The Grumpy Chef Academy teaches you to never miss it again."
        </div>

        <!-- ATTRIBUTION -->
        <div class="results-attribution">
            <img class="results-attribution__photo" src="/images/Kitchen1.jpg" alt="Christian Schiffner">
            <div class="results-attribution__text">
                <strong>Christian Schiffner</strong> — German Master Chef (Kuechenmeister). 20+ years engineering menus from Zurich to the Yukon. These principles are from real kitchens, not textbooks.
            </div>
        </div>

    </div>
</section>

<!-- ============================================
     EMAIL CAPTURE
     ============================================ -->
<section class="capture" id="captureSection">
    <div class="container">
        <div class="capture__box" id="captureForm">
            <div class="capture__title">Get Your Complete Menu Engineering Action Plan</div>
            <p class="capture__sub">
                I'll send you a personalized breakdown of your 3 biggest opportunities + specific implementation steps. No fluff. Just the system.
            </p>
            <form class="capture__form" onsubmit="submitCapture(event)">
                <div class="capture__row">
                    <input type="text" class="capture__field" id="capName" placeholder="Your Name" required>
                    <input type="email" class="capture__field" id="capEmail" placeholder="Email Address" required>
                </div>
                <div class="capture__row">
                    <input type="text" class="capture__field" id="capRestaurant" placeholder="Restaurant Name">
                    <select class="capture__select" id="capRevenue">
                        <option value="" disabled selected>Average Monthly Revenue</option>
                        <option value="under-50k">Under $50K</option>
                        <option value="50k-100k">$50K - $100K</option>
                        <option value="100k-250k">$100K - $250K</option>
                        <option value="250k-plus">$250K+</option>
                    </select>
                </div>
                <div class="capture__error" id="captureError">Please fill in your name and email.</div>
                <button type="submit" class="capture__btn" id="captureBtn">Send My Action Plan</button>
            </form>
            <p class="capture__privacy">I respect your inbox. No spam, just systems that work.</p>
        </div>

        <div class="capture__success" id="captureSuccess">
            <div class="capture__success-icon">&#10003;</div>
            <div class="capture__success-title">Action Plan on Its Way</div>
            <p class="capture__success-text">
                Check your email in 2 minutes for your personalized menu engineering action plan with your 3 biggest opportunities and specific steps to implement this week.
            </p>
        </div>
    </div>
</section>

<!-- ============================================
     CTAs
     ============================================ -->
<section class="cta-section" id="ctaSection">
    <div class="container">
        <div class="cta-primary" style="cursor: default;">
            <div class="cta-primary__title">Book Your Menu Engineering Discovery Call</div>
            <div class="cta-primary__sub">30 minutes. Your menu. Specific changes. Real numbers.</div>
            <div id="assessment-discovery-form-container" style="margin-top: 16px;">
                <form id="assessment-discovery-form" style="max-width: 400px; margin: 0 auto;">
                    <div style="margin-bottom: 12px;">
                        <input type="email" id="assessment-discovery-email" placeholder="Your email address" required
                            style="width: 100%; padding: 12px 16px; background: #111E35; border: 1px solid #1A2D4D; border-radius: 8px; color: #F8F9FA; font-size: 0.95rem; outline: none;"
                            onfocus="this.style.borderColor='#D4AF37'" onblur="this.style.borderColor='#1A2D4D'">
                    </div>
                    <div style="margin-bottom: 16px;">
                        <input type="text" id="assessment-discovery-name" placeholder="First name (optional)"
                            style="width: 100%; padding: 12px 16px; background: #111E35; border: 1px solid #1A2D4D; border-radius: 8px; color: #F8F9FA; font-size: 0.95rem; outline: none;"
                            onfocus="this.style.borderColor='#D4AF37'" onblur="this.style.borderColor='#1A2D4D'">
                    </div>
                    <button type="submit" style="width: 100%; padding: 14px 24px; background: #D4AF37; color: #0A1628; font-family: var(--font-display); font-weight: 700; font-size: 14px; text-transform: uppercase; letter-spacing: 0.5px; border: none; border-radius: 8px; cursor: pointer;">
                        Request a Discovery Call
                    </button>
                </form>
            </div>
            <div id="assessment-discovery-success" style="display: none; padding: 24px; background: rgba(212, 175, 55, 0.1); border: 1px solid rgba(212, 175, 55, 0.25); border-radius: 8px; max-width: 400px; margin: 16px auto 0;">
                <p style="font-family: var(--font-display); font-size: 1.2rem; font-weight: 700; text-transform: uppercase; color: #D4AF37; margin-bottom: 8px;">Got it.</p>
                <p style="color: #B8BEC8; font-size: 0.95rem;">I'll be in touch within 24 hours.</p>
            </div>
        </div>

        <div class="cta-row">
            <a class="cta-secondary" href="/calculator.html">
                <div class="cta-secondary__title">72-Hour Profit Discovery</div>
                <div class="cta-secondary__sub">Find all 8 operational leaks</div>
            </a>
            <a class="cta-secondary" href="/academy.html">
                <div class="cta-secondary__title">The Grumpy Chef Academy</div>
                <div class="cta-secondary__sub">Join the founding member waitlist</div>
            </a>
        </div>

        <div class="cta-funnel">
            This assessment shows you WHAT you're missing.<br>
            The discovery call shows you HOW to fix it.<br>
            The Grumpy Chef Academy teaches you to never miss it again.
        </div>
    </div>
</section>

<!-- ============================================
     FOOTER
     ============================================ -->
<footer class="footer">
    <div class="container">
        <p class="footer__text">
            The Grumpy Chef &mdash; Systems that work when you're exhausted.
            <br>
            <a href="72-hour-profit-discovery-calculator.html">72-Hour Profit Discovery</a>
        </p>
    </div>
</footer>


<script>
/* ============================================
   CONFIG
   ============================================ */
const WEBHOOK_URL = 'https://christhwegrumpychef.app.n8n.cloud/webhook/grumpy-chef-leads';
const SCOREAPP_API_URL = '';

/* ============================================
   QUESTIONS DATA
   ============================================ */
const questions = [
    {
        id: 'currency_symbols',
        text: 'Does your menu have currency symbols ($) on prices?',
        options: [
            { label: 'Yes', points: 0, insight: 'Customers spend 8% less when they see dollar signs (Cornell University research)' },
            { label: 'No', points: 10, insight: 'Good — you\'re removing psychological friction from the buying decision' }
        ],
        missedInsight: 'Removing $ signs increases average spend by 8%. On $500K annual revenue, that\'s $40,000. Cost to fix: $0.',
        quickWin: 'Remove all currency symbols from your menu. Use "24" instead of "$24.00". Takes 10 minutes to update.',
        research: 'Cornell School of Hotel Administration'
    },
    {
        id: 'menu_size',
        text: 'How many items are on your menu?',
        options: [
            { label: 'Under 20', points: 10, insight: 'Perfect — focused menus increase satisfaction and reduce kitchen complexity' },
            { label: '20-40', points: 5, insight: 'Decent, but could be tighter. Look for items selling fewer than 3/day' },
            { label: '40-60', points: 2, insight: 'Too many — causing decision fatigue and inflating food costs' },
            { label: '60+', points: 0, insight: 'Critical — you\'re losing money on complexity, inventory, waste, and confused customers' }
        ],
        missedInsight: 'Every item under 3 sales/day costs you in inventory waste, prep labor, and customer confusion. Cut the bottom 20% of your menu.',
        quickWin: 'Pull your POS data. Find items selling fewer than 3/day. Remove the bottom 5 this week.',
        research: 'Paradox of Choice (Sheena Iyengar, Columbia Business School)'
    },
    {
        id: 'descriptive_language',
        text: 'Do you use descriptive language for dishes?',
        options: [
            { label: 'Minimal/basic descriptions', points: 0, insight: 'Descriptive labels increase sales by 27% (Cornell research)' },
            { label: 'Some sensory words', points: 5, insight: 'Good start, but there\'s significant room for improvement' },
            { label: 'Rich sensory, nostalgic, and geographic descriptions', points: 10, insight: 'Excellent — you understand the power of words on purchasing decisions' }
        ],
        missedInsight: '"Grilled Chicken" vs "Herb-Crusted Free-Range Chicken, slow-roasted with Provencal herbs." Same dish. 27% more sales. Words are free.',
        quickWin: 'Rewrite descriptions for your top 5 highest-margin items. Add origin, technique, or sensory words.',
        research: 'Cornell descriptive menu label study (27% increase)'
    },
    {
        id: 'price_position',
        text: 'Where are prices positioned on your menu?',
        options: [
            { label: 'Right-aligned in a column', points: 0, insight: 'Customers scan down the price column and pick the cheapest — you\'re losing margin' },
            { label: 'Nested at the end of descriptions', points: 10, insight: 'Smart — they read the food first and consider value, not just cost' }
        ],
        missedInsight: 'Right-aligned prices create a "price column" customers scan to find the cheapest option. Embedding prices in descriptions shifts focus to the food.',
        quickWin: 'Move prices to the end of each item description. Remove dotted leader lines. Eliminate the price column.',
        research: 'Menu design psychology (Grewal & Levy)'
    },
    {
        id: 'price_anchoring',
        text: 'Do you use price anchoring (an expensive item to make others seem reasonable)?',
        options: [
            { label: 'No high-priced anchor items', points: 0, insight: 'You\'re missing a 6-8% average check boost. A premium item reframes everything else as a deal.' },
            { label: 'One or two strategic anchors', points: 10, insight: 'Good strategy — the anchor reframes every other price as reasonable' }
        ],
        missedInsight: 'A $65 steak makes a $28 pasta look like a deal. Without an anchor, customers default to mid-range. Average check drops 6-8%.',
        quickWin: 'Add one premium item per menu section. Price it 40-60% above your next highest item. It doesn\'t need to sell — it reframes everything.',
        research: 'Journal of Consumer Research (price anchoring effect)'
    },
    {
        id: 'pricing_format',
        text: 'How do you handle your pricing decimals?',
        options: [
            { label: '$24.00 format', points: 0, insight: 'Feels like an invoice, not a menu. The ".00" adds cognitive weight.' },
            { label: '$23.99 charm pricing everywhere', points: 3, insight: 'Only works for fast-casual. Signals "cheap" in fine dining or premium casual.' },
            { label: 'Whole numbers: 24', points: 10, insight: 'Perfect — premium psychology without the price friction' },
            { label: 'Strategic mix based on category', points: 10, insight: 'You know your stuff — matching format to positioning per category' }
        ],
        missedInsight: '"$24.00" processes as a transaction. "24" processes as a number. The period and zeros add subconscious friction that reduces willingness to spend.',
        quickWin: 'Change all prices to whole numbers. Drop the $ sign. "Herb-Crusted Salmon, roasted vegetables, lemon butter... 28"',
        research: 'Cornell pricing format study'
    },
    {
        id: 'menu_engineering',
        text: 'Do you know which menu items are your "Stars" (high profit, high popularity)?',
        options: [
            { label: 'No / Unsure', points: 0, insight: 'You\'re flying blind. Stars should be featured, Dogs should be cut, Puzzles need marketing.' },
            { label: 'Yes, I track sales and margins', points: 10, insight: 'This is the foundation of menu engineering. Every decision should flow from this data.' }
        ],
        missedInsight: 'Without knowing your Stars (high profit + high popularity), Plowhorses (low profit + high popularity), Puzzles (high profit + low popularity), and Dogs (low everything), every menu decision is a guess.',
        quickWin: 'Pull 30 days of POS data. Calculate food cost % per item. Plot items on a 2x2 grid: popularity vs profitability.',
        research: 'Kasavana & Smith Menu Engineering Matrix (1982)'
    },
    {
        id: 'analysis_frequency',
        text: 'How often do you analyze menu performance?',
        options: [
            { label: 'Never / Rarely', points: 0, insight: 'You\'re leaving money on the table monthly. Menu mix shifts seasonally — you need data.' },
            { label: 'Quarterly', points: 5, insight: 'Decent cadence. But customer preferences shift faster than that.' },
            { label: 'Monthly', points: 10, insight: 'Professional approach. Monthly analysis catches trends before they cost you.' }
        ],
        missedInsight: 'Menu performance shifts month to month. Seasonal preferences, ingredient costs, staff execution — all change. Without regular analysis, you\'re reacting instead of leading.',
        quickWin: 'Set a monthly 30-minute "menu review" — same day each month. Pull sales mix, check margins, identify trends.',
        research: 'Continuous improvement methodology applied to menu management'
    },
    {
        id: 'visual_hierarchy',
        text: 'Do you have visual hierarchy (boxes, icons, white space) highlighting key items?',
        options: [
            { label: 'No visual elements', points: 0, insight: 'Everything looks the same = nothing stands out. Customers default to familiar or cheap.' },
            { label: 'Some boxes / highlights', points: 5, insight: 'Good, but too many highlights cancel each other out. Focus on 2-3 per page.' },
            { label: 'Strategic: 2-3 featured items per page', points: 10, insight: 'Perfect balance — enough to guide without overwhelming. Those items will outsell others 2:1.' }
        ],
        missedInsight: 'The eye goes where the menu directs it. A simple box around a high-margin item can double its sales. But highlight everything and nothing stands out.',
        quickWin: 'Add a simple border or background to your #1 highest-margin item in each menu section. Just one per section.',
        research: 'Eye-tracking studies on menu design (San Francisco State University)'
    },
    {
        id: 'dog_items',
        text: 'How many "Dog" items (low profit, low popularity) are on your menu?',
        options: [
            { label: 'Don\'t know', points: 0, insight: 'Every Dog costs you money to stock, space to store, and mental load to prep. They confuse customers.' },
            { label: 'More than 10', points: 2, insight: 'Time to cut the losers. Every Dog removed simplifies operations and sharpens focus.' },
            { label: '5-10', points: 5, insight: 'Getting there. Target under 5 — each one you cut reduces waste and complexity.' },
            { label: 'Under 5', points: 10, insight: 'Lean and focused. Your kitchen runs cleaner and customers choose better.' }
        ],
        missedInsight: 'Dog items cost you three ways: inventory carrying cost, kitchen prep complexity, and customer decision fatigue. Each one removed saves money across all three.',
        quickWin: 'Identify your 3 lowest-selling, lowest-margin items. Remove them this week. Nobody will miss them.',
        research: 'Menu engineering classification system (Stars, Plowhorses, Puzzles, Dogs)'
    }
];

/* ============================================
   SCORING TIERS
   ============================================ */
const tiers = [
    {
        min: 80, max: 100,
        name: 'Menu Engineering Pro',
        desc: 'You\'re in the top 5% of restaurants. You understand the psychology and the data behind profitable menu design.',
        opportunity: '$5K - $15K',
        nextStep: 'You\'re running a tight ship. Let\'s find the remaining opportunities hiding in your operation — the leaks that menu engineering alone won\'t catch.',
        color: 'var(--green)',
        gaugeColor: '#2F855A'
    },
    {
        min: 60, max: 79,
        name: 'Strong Foundation, Missing Key Wins',
        desc: 'You\'re doing better than 70% of restaurants, but you\'re leaving real money on the table. The right adjustments could add $2K-$3K monthly.',
        opportunity: '$20K - $40K',
        nextStep: 'You have the foundation. The gap between where you are and the top 5% is a handful of specific, implementable changes. That\'s where the discovery call comes in.',
        color: 'var(--blue)',
        gaugeColor: '#00A6D6'
    },
    {
        min: 40, max: 59,
        name: 'Profitable Changes Waiting',
        desc: 'Your menu works, but it\'s not working FOR you. Every answer you missed below is a specific revenue opportunity with research to back it up.',
        opportunity: '$40K - $70K',
        nextStep: 'The good news: your biggest improvements require zero price increases. Design changes, description rewrites, and strategic item placement. Most are free to implement.',
        color: 'var(--gold)',
        gaugeColor: '#D4AF37'
    },
    {
        min: 20, max: 39,
        name: 'Significant Profit Leak',
        desc: 'Your menu design is actively costing you money every service. Customers are scanning for the cheapest option, skipping your best items, and you\'re stocking things nobody orders.',
        opportunity: '$70K - $120K',
        nextStep: 'Menu engineering could be your fastest ROI project. No construction. No new hires. No equipment. Just smarter design based on how customers actually read and decide.',
        color: 'var(--gold)',
        gaugeColor: '#D4AF37'
    },
    {
        min: 0, max: 19,
        name: 'Emergency Redesign Needed',
        desc: 'Your menu is working against you. Customers are confused, you\'re stocking too many items, and profit is walking out the door with every guest who picks the cheapest thing because your design told them to.',
        opportunity: '$100K - $160K',
        nextStep: 'This is fixable in 30-45 days with the right framework. A systematic menu redesign using the principles in this assessment could be the single highest-ROI project you do this year.',
        color: 'var(--red)',
        gaugeColor: '#C53030'
    }
];

/* ============================================
   STATE
   ============================================ */
let currentQuestion = 0;
let answers = new Array(questions.length).fill(null);

/* ============================================
   RENDER QUIZ
   ============================================ */
function renderQuiz() {
    const container = document.getElementById('quizContainer');
    let html = '';

    questions.forEach((q, qi) => {
        html += `<div class="question-card" id="q${qi}" ${qi === 0 ? '' : ''}>`;
        html += `<div class="question-card__num">Question ${qi + 1} of ${questions.length}</div>`;
        html += `<div class="question-card__text">${q.text}</div>`;

        q.options.forEach((opt, oi) => {
            html += `
                <div class="answer-option" id="opt-${qi}-${oi}" onclick="selectAnswer(${qi}, ${oi})">
                    <div class="answer-option__radio">
                        <div class="answer-option__radio__dot"></div>
                    </div>
                    <div class="answer-option__content">
                        <div class="answer-option__label">${opt.label}</div>
                        <div class="answer-option__insight">${opt.insight}</div>
                    </div>
                    <div class="answer-option__points">${opt.points} pts</div>
                </div>
            `;
        });

        html += `
            <div class="quiz-nav">
                <button class="btn-back" onclick="prevQuestion()" ${qi === 0 ? 'disabled' : ''}>Back</button>
                <button class="btn-next" id="nextBtn-${qi}" onclick="${qi === questions.length - 1 ? 'showResults()' : 'nextQuestion()'}" disabled>
                    ${qi === questions.length - 1 ? 'See My Score' : 'Next Question'}
                </button>
            </div>
        </div>`;
    });

    container.innerHTML = html;
}

/* ============================================
   QUIZ NAVIGATION
   ============================================ */
function startAssessment() {
    document.getElementById('progressSection').classList.add('active');
    document.getElementById('quizSection').classList.add('active');
    showQuestion(0);
    document.getElementById('quizSection').scrollIntoView({ behavior: 'smooth', block: 'start' });
}

function showQuestion(index) {
    document.querySelectorAll('.question-card').forEach(el => el.classList.remove('active'));
    const card = document.getElementById('q' + index);
    if (card) {
        card.classList.add('active');
        card.style.animation = 'none';
        card.offsetHeight; // trigger reflow
        card.style.animation = '';
    }
    currentQuestion = index;
    updateProgress();
    updateNavState();
}

function selectAnswer(qi, oi) {
    answers[qi] = oi;

    // Update visual state
    questions[qi].options.forEach((_, i) => {
        const el = document.getElementById(`opt-${qi}-${i}`);
        el.classList.toggle('selected', i === oi);
    });

    // Enable next button
    const nextBtn = document.getElementById(`nextBtn-${qi}`);
    if (nextBtn) nextBtn.disabled = false;
}

function nextQuestion() {
    if (currentQuestion < questions.length - 1) {
        showQuestion(currentQuestion + 1);
        document.getElementById('progressSection').scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
}

function prevQuestion() {
    if (currentQuestion > 0) {
        showQuestion(currentQuestion - 1);
        document.getElementById('progressSection').scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
}

function updateProgress() {
    const pct = ((currentQuestion + 1) / questions.length) * 100;
    document.getElementById('progressFill').style.width = pct + '%';
    document.getElementById('progressCount').textContent = `Question ${currentQuestion + 1} of ${questions.length}`;
}

function updateNavState() {
    const nextBtn = document.getElementById(`nextBtn-${currentQuestion}`);
    if (nextBtn) {
        nextBtn.disabled = answers[currentQuestion] === null;
    }
}

/* ============================================
   RESULTS
   ============================================ */
function showResults() {
    // Calculate score
    let totalScore = 0;
    answers.forEach((ansIdx, qi) => {
        if (ansIdx !== null) {
            totalScore += questions[qi].options[ansIdx].points;
        }
    });

    // Find tier
    const tier = tiers.find(t => totalScore >= t.min && totalScore <= t.max) || tiers[tiers.length - 1];

    // Hide quiz, show results
    document.getElementById('quizSection').classList.remove('active');
    document.getElementById('progressSection').classList.remove('active');
    document.getElementById('resultsSection').classList.add('active');
    document.getElementById('captureSection').classList.add('active');
    document.getElementById('ctaSection').classList.add('active');

    // Animate gauge
    animateGauge(totalScore, tier.gaugeColor);

    // Fill tier info
    document.getElementById('resultsTier').textContent = tier.name;
    document.getElementById('resultsTier').style.color = tier.color;
    document.getElementById('resultsDesc').textContent = tier.desc;
    document.getElementById('resultsAmount').textContent = tier.opportunity;
    document.getElementById('resultsNextStep').textContent = tier.nextStep;

    // Build missed opportunities (questions where they didn't get max points)
    buildMissedOpportunities();

    // Build quick wins
    buildQuickWins();

    // Scroll to results
    document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth', block: 'start' });
}

function animateGauge(score, color) {
    const path = document.getElementById('gaugeFill');
    const numEl = document.getElementById('gaugeNumber');

    // Arc length calculation for semicircle
    // Path: M 20 110 A 90 90 0 0 1 200 110
    const totalLength = Math.PI * 90; // ~282.74
    const fillLength = (score / 100) * totalLength;

    path.style.strokeDasharray = totalLength;
    path.style.strokeDashoffset = totalLength;
    path.style.stroke = color;

    // Animate after brief delay
    requestAnimationFrame(() => {
        setTimeout(() => {
            path.style.strokeDashoffset = totalLength - fillLength;
        }, 100);
    });

    // Animate number
    let current = 0;
    const duration = 1500;
    const start = performance.now();

    function tick(now) {
        const elapsed = now - start;
        const progress = Math.min(elapsed / duration, 1);
        const eased = 1 - Math.pow(1 - progress, 3);
        current = Math.round(eased * score);
        numEl.textContent = current;
        numEl.style.color = color;
        if (progress < 1) requestAnimationFrame(tick);
    }
    requestAnimationFrame(tick);
}

function buildMissedOpportunities() {
    const missed = [];

    answers.forEach((ansIdx, qi) => {
        if (ansIdx === null) return;
        const q = questions[qi];
        const maxPoints = Math.max(...q.options.map(o => o.points));
        const gotPoints = q.options[ansIdx].points;

        if (gotPoints < maxPoints) {
            missed.push({
                question: q.text,
                insight: q.missedInsight,
                pointsLost: maxPoints - gotPoints,
                answer: q.options[ansIdx].label
            });
        }
    });

    // Sort by points lost, show top 3
    missed.sort((a, b) => b.pointsLost - a.pointsLost);
    const top = missed.slice(0, 3);

    const container = document.getElementById('missedList');
    if (top.length === 0) {
        document.getElementById('missedSection').style.display = 'none';
        return;
    }

    container.innerHTML = top.map((m, i) => `
        <div class="missed-item">
            <div class="missed-item__q">${m.question}</div>
            <div class="missed-item__insight">${m.insight}</div>
            <div class="missed-item__impact">Your answer: "${m.answer}" — ${m.pointsLost} points left on the table</div>
        </div>
    `).join('');
}

function buildQuickWins() {
    const wins = [];

    answers.forEach((ansIdx, qi) => {
        if (ansIdx === null) return;
        const q = questions[qi];
        const maxPoints = Math.max(...q.options.map(o => o.points));
        const gotPoints = q.options[ansIdx].points;

        if (gotPoints < maxPoints) {
            wins.push({
                text: q.quickWin,
                pointsLost: maxPoints - gotPoints
            });
        }
    });

    wins.sort((a, b) => b.pointsLost - a.pointsLost);
    const top = wins.slice(0, 4);

    const container = document.getElementById('quickWinsList');
    if (top.length === 0) {
        document.getElementById('quickWinsSection').style.display = 'none';
        return;
    }

    container.innerHTML = top.map((w, i) => `
        <div class="win-item">
            <div class="win-item__icon">${i + 1}</div>
            <div class="win-item__text">${w.text}</div>
        </div>
    `).join('');
}

/* ============================================
   EMAIL CAPTURE & INTEGRATIONS
   ============================================ */
function getScoreData() {
    let totalScore = 0;
    const answerDetails = [];

    answers.forEach((ansIdx, qi) => {
        const q = questions[qi];
        const maxPoints = Math.max(...q.options.map(o => o.points));
        const gotPoints = ansIdx !== null ? q.options[ansIdx].points : 0;

        totalScore += gotPoints;
        answerDetails.push({
            question: q.text,
            questionId: q.id,
            answer: ansIdx !== null ? q.options[ansIdx].label : null,
            pointsEarned: gotPoints,
            pointsPossible: maxPoints,
            missed: gotPoints < maxPoints
        });
    });

    const tier = tiers.find(t => totalScore >= t.min && totalScore <= t.max) || tiers[tiers.length - 1];
    return { totalScore, answerDetails, tier };
}

function buildScoreAppPayload() {
    const { totalScore, answerDetails, tier } = getScoreData();

    const answersMap = {};
    answerDetails.forEach(a => {
        answersMap[a.questionId] = a.answer;
    });

    const missedOpportunities = answerDetails
        .filter(a => a.missed)
        .sort((a, b) => (b.pointsPossible - b.pointsEarned) - (a.pointsPossible - a.pointsEarned))
        .slice(0, 3)
        .map(a => {
            const q = questions.find(q => q.id === a.questionId);
            return q ? q.missedInsight.split('.')[0] : a.question;
        });

    return {
        email: document.getElementById('capEmail').value.trim(),
        name: document.getElementById('capName').value.trim(),
        restaurant_name: document.getElementById('capRestaurant').value.trim(),
        monthly_revenue: document.getElementById('capRevenue').value || 'not provided',
        score: totalScore,
        score_tier: tier.name,
        opportunity_amount: tier.opportunity,
        answers: answersMap,
        missed_opportunities: missedOpportunities,
        timestamp: new Date().toISOString(),
        source: 'menu-profit-score-assessment'
    };
}

function buildWebhookPayload() {
    const { totalScore, answerDetails, tier } = getScoreData();

    return {
        contact: {
            name: document.getElementById('capName').value.trim(),
            email: document.getElementById('capEmail').value.trim(),
            restaurant: document.getElementById('capRestaurant').value.trim(),
            monthlyRevenue: document.getElementById('capRevenue').value
        },
        results: {
            totalScore: totalScore,
            maxScore: 100,
            scorePercentage: totalScore,
            tier: tier.name,
            opportunity: tier.opportunity,
            answeredQuestions: answers.filter(a => a !== null).length,
            totalQuestions: questions.length,
            missedCount: answerDetails.filter(a => a.missed).length,
            answers: answerDetails,
            topMissed: answerDetails.filter(a => a.missed).sort((a, b) =>
                (b.pointsPossible - b.pointsEarned) - (a.pointsPossible - a.pointsEarned)
            ).slice(0, 3).map(a => ({
                question: a.question,
                questionId: a.questionId,
                pointsLost: a.pointsPossible - a.pointsEarned
            })),
            timestamp: new Date().toISOString(),
            source: 'menu-profit-score-assessment-v1'
        }
    };
}

async function submitCapture(e) {
    e.preventDefault();

    const name = document.getElementById('capName').value.trim();
    const email = document.getElementById('capEmail').value.trim();
    const errorEl = document.getElementById('captureError');
    const btn = document.getElementById('captureBtn');

    if (!name || !email) {
        errorEl.style.display = 'block';
        errorEl.textContent = 'Please fill in your name and email.';
        return;
    }

    if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
        errorEl.style.display = 'block';
        errorEl.textContent = 'Please enter a valid email address.';
        return;
    }

    errorEl.style.display = 'none';
    btn.disabled = true;
    btn.textContent = 'Sending...';

    let submitted = false;

    // Primary: Score App
    if (SCOREAPP_API_URL && SCOREAPP_API_URL !== 'YOUR_SCOREAPP_API_ENDPOINT') {
        try {
            const scoreAppPayload = buildScoreAppPayload();
            const res = await fetch(SCOREAPP_API_URL, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(scoreAppPayload)
            });
            if (res.ok) {
                submitted = true;
            } else {
                console.warn('Score App API returned status:', res.status);
            }
        } catch (err) {
            console.warn('Score App API failed, falling back to webhook:', err);
        }
    }

    // Fallback or parallel: n8n Webhook
    if (WEBHOOK_URL && WEBHOOK_URL !== 'https://christhwegrumpychef.app.n8n.cloud/webhook/grumpy-chef-leads') {
        try {
            const webhookPayload = buildWebhookPayload();
            await fetch(WEBHOOK_URL, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(webhookPayload)
            });
            submitted = true;
        } catch (err) {
            console.warn('Webhook delivery failed:', err);
        }
    }

    // Log payload if neither endpoint is configured
    if (!submitted) {
        const payload = buildWebhookPayload();
        console.log('Menu Profit Score — No endpoints configured. Payload:', JSON.stringify(payload, null, 2));
        console.log('Score App format:', JSON.stringify(buildScoreAppPayload(), null, 2));
    }

    // Show success regardless — never leave the user hanging
    document.getElementById('captureForm').style.display = 'none';
    document.getElementById('captureSuccess').classList.add('active');
}

/* ============================================
   EXPORT: PRINT
   ============================================ */
function printResults() {
    window.print();
}

/* ============================================
   INIT
   ============================================ */
renderQuiz();
</script>

<script>
document.getElementById('assessment-discovery-form').addEventListener('submit', function(e) {
    e.preventDefault();
    var email = document.getElementById('assessment-discovery-email').value;
    var name = document.getElementById('assessment-discovery-name').value;

    var payload = {
        email: email,
        first_name: name || '',
        source: 'discovery-call-request',
        tags: ['discovery-call-request'],
        page_source: 'menu-profit-score-assessment',
        timestamp: new Date().toISOString()
    };

    fetch('https://hook.us1.make.com/placeholder-discovery', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
    }).catch(function() {});

    document.getElementById('assessment-discovery-form-container').style.display = 'none';
    document.getElementById('assessment-discovery-success').style.display = 'block';

    console.log('Discovery call request (assessment):', payload);
});
</script>

</body>
</html>
